<!DOCTYPE html>
<html>
<head>
    <title>My GitHub Pages Website</title>
</head>
<body>
    <h1>Welcome to My Website</h1>
    <p>This is my new website hosted on GitHub Pages!</p>
    
    <form id="uploadForm">
        <input type="file" id="fileUpload" name="fileUpload">
        <input type="submit" value="Upload">
    </form>

    <div id="uploadStatus"></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('uploadForm');
        const fileInput = document.getElementById('fileUpload');
        const uploadStatus = document.getElementById('uploadStatus');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            if (!fileInput.files.length) {
                uploadStatus.textContent = 'Please select a file to upload.';
                return;
            }

            const file = fileInput.files[0];
            
            // Use your specific API Gateway endpoint
            const apiEndpoint = 'https://vdrmsynhhk.execute-api.us-east-1.amazonaws.com/prod/upload';

            try {
                const formData = new FormData();
                formData.append('file', file);

                const response = await fetch(apiEndpoint, {
                    method: 'POST',
                    mode: 'cors', // Ensure CORS mode
                    headers: {
                        // Optional: sometimes helps with CORS
                        'Content-Type': 'multipart/form-data'
                    },
                    body: formData
                });

                // Detailed logging
                console.log('Response status:', response.status);
                const responseBody = await response.text();
                console.log('Response body:', responseBody);

                if (response.ok) {
                    uploadStatus.textContent = 'File uploaded successfully!';
                    uploadStatus.style.color = 'green';
                } else {
                    uploadStatus.textContent = `Upload failed. Status: ${response.status}`;
                    uploadStatus.style.color = 'red';
                }
            } catch (error) {
                console.error('Detailed upload error:', error);
                uploadStatus.textContent = `Upload error: ${error.message}`;
                uploadStatus.style.color = 'red';
            }
        });
    });
    </script>
</body>
</html>
